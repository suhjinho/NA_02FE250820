#include "Init.h"

void Init_GPIO(void)
{
	SCU->PER1 |= 0x3F00;	// Enable ports
	SCU->PCER1 |= 0x3F00;	// Enable port clocks
	PORT_ACCESS_EN();
	
	// GPIO-A --------------
	SCU->PER1 |= (1 << 8);
	SCU->PCER1 |= (1 << 8);
	PA->MOD = 0x00000140;
	PA->TYP = 0x00000000;
	PA->AFSR1 = 0x00000000;
	PA->PUPD = 0x00000000;
	PA->DBCR = 0x00000000;
	PCU->KEYR = 0x00000702;
	PCU->SEGR = 0x000000FF;
	PCU->KEYR = 0xA8070000;
	PCU->COMR = 0x000000FF;
	PCU->KEYR = 0x00000000;
	
	// GPIO-B --------------
	SCU->PER1 |= (1 << 9);
	SCU->PCER1 |= (1 << 9);
	PB->MOD = 0x0000AAA0;
	PB->TYP = 0x00000000;
	PB->AFSR1 = 0x33221400;
	PB->PUPD = 0x00000000;
	PB->DBCR = 0x00000000;
	PCU->KEYR = 0x00000702;
	PCU->SEGR = 0x000000FF;
	PCU->KEYR = 0xA8070000;
	PCU->COMR = 0x000000FF;
	PCU->KEYR = 0x00000000;
	
	// GPIO-C --------------
	SCU->PER1 |= (1 << 10);
	SCU->PCER1 |= (1 << 10);
	PC->MOD = 0x00000AAA;
	PC->TYP = 0x00000000;
	PC->AFSR1 = 0x00044444;
	PC->PUPD = 0x00000000;
	PC->DBCR = 0x00000000;
	PCU->KEYR = 0x00000702;
	PCU->SEGR = 0x000000FF;
	PCU->KEYR = 0xA8070000;
	PCU->COMR = 0x000000FF;
	PCU->KEYR = 0x00000000;
	
	// GPIO-D --------------
	SCU->PER1 |= (1 << 11);
	SCU->PCER1 |= (1 << 11);
	PD->MOD = 0x00000A0A;
	PD->TYP = 0x00000000;
	PD->AFSR1 = 0x00440044;
	PD->PUPD = 0x00000000;
	PD->DBCR = 0x00000000;
	PCU->KEYR = 0x00000702;
	PCU->SEGR = 0x000000FF;
	PCU->KEYR = 0xA8070000;
	PCU->COMR = 0x000000FF;
	PCU->KEYR = 0x00000000;
	
	// GPIO-E --------------
	SCU->PER1 |= (1 << 12);
	SCU->PCER1 |= (1 << 12);
	PE->MOD = 0x0000AAA6;
	PE->TYP = 0x00000001;
	PE->AFSR1 = 0x44444401;
	PE->PUPD = 0x00000000;
	PE->DBCR = 0x00000000;
	PCU->KEYR = 0x00000702;
	PCU->SEGR = 0x000000FF;
	PCU->KEYR = 0xA8070000;
	PCU->COMR = 0x000000FF;
	PCU->KEYR = 0x00000000;
	
	// GPIO-F --------------
	SCU->PER1 |= (1 << 13);
	SCU->PCER1 |= (1 << 13);
	PF->MOD = 0x00000500;
	PF->TYP = 0x00000000;
	PF->AFSR1 = 0x00000000;
	PF->PUPD = 0x00000000;
	PF->DBCR = 0x00000000;
	//PF->PLSR = 0x??;	// TODO : Port F level
	PCU->KEYR = 0x00000702;
	PCU->SEGR = 0x000000FF;
	PCU->KEYR = 0xA8070000;
	PCU->COMR = 0x000000FF;
	PCU->KEYR = 0x00000000;

	PORT_ACCESS_DIS();
}

void Init(void)
{
	Init_GPIO();
	SystemClock_Config();
}
